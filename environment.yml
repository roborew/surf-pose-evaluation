name: surf_pose_eval
channels:
  - pytorch
  - nvidia
  - conda-forge
  - defaults

dependencies:
  # Core Python and system
  - python=3.10
  - pip
  - setuptools
  - wheel

  # CUDA and PyTorch ecosystem (CUDA 12.1 for RTX 3090/4090)
  - pytorch=2.1.0
  - torchvision=0.16.0
  - torchaudio=2.1.0
  - pytorch-cuda=12.1

  # Core ML and scientific computing
  - numpy=1.24.3
  - scipy=1.11.1
  - scikit-learn=1.3.0
  - pandas=2.0.3
  - matplotlib=3.7.2

  - pillow=9.4.0

  # Media processing
  - imageio=2.31.1

  # Development and testing
  - pytest=7.4.0

  # ML experiment tracking and optimization
  - mlflow=2.5.0
  - optuna=3.2.0

  # Additional utilities
  - pyyaml=6.0
  - tqdm=4.65.0
  - rich=13.4.2

  # Pip dependencies for pose estimation packages
  - pip:
      # OpenCV
      - opencv-python==4.8.0.76

      # MediaPipe for pose estimation
      - mediapipe==0.10.14

      # YOLOv8 from Ultralytics
      - ultralytics==8.0.165

      # Additional utilities
      - termcolor==2.3.0
      - psutil==5.9.5

    # Note: MMPose installed via setup script after environment creation

# Environment variables for CUDA optimization
variables:
  CUDA_VISIBLE_DEVICES: "0" # Use first GPU by default
  PYTORCH_CUDA_ALLOC_CONF: "max_split_size_mb:128" # Optimize memory allocation
