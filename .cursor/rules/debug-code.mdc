---
description: Two-phase DEBUG workflow for every defect raised.
globs:
alwaysApply: false
type: Manual
---

# Approach:

â‘  Examination Phase (â€œDiagnoseâ€)
â€¢ **No code changes** in the repo.  
 â€¢ The agent analyses error logs, stack traces, failing tests,
recent commits, and relevant ENV/config values.
â€¢ Confirm the most obvious things first depending on the issue
i.e if its a javascript issue has the code be compile. If the page
is not loading is the server running. Confirm as much information as possible
before starting your analysis.
â€¢ Produces a **Debug Report** that includes:  
 â€“ Likely root-causes ranked by probability  
 â€“ Specific things for the human reviewer to inspect
(e.g. â€œConfirm ENV['REDIS_URL'] matches stagingâ€,
â€œSet a breakpoint at OrdersController#create, line 42â€)  
 â€“ Suggested break-point locations or logging patches  
 â€“ Any external docs/RFC links that clarify behaviour  
 â€¢ Stops and waits for **â€œConfirm diagnosisâ€**.
â‘¡ Fix Phase (â€œApplyâ€)
â€¢ Proposes a minimal, test-driven fixâ€”code samples allowed,
but **MUST NOT** alter files yet.  
 â€¢ Lists tests that _should_ fail before the fix and pass after.  
 â€¢ Pauses for **â€œApprove fix planâ€**.
â‘¢ Implementation Phase (â€œCodeâ€) â€“ after approval
â€¢ Follows strict micro-TDD:

1.  Add failing test(s)
2.  Write minimal code to pass
3.  Refactor for DRY/SOLID & style guides  
     â€¢ Keeps suite green & linters clean at each pause.  
     â€¢ Seeks explicit **â€œShip itâ€** before final merge.
    â€¢ Strictly follow principles: KISS, YAGNI, DRY, SOLID, CLEAN CODE, etc.

# ğŸ Debug-First Workflow

## 0ï¸âƒ£ Trigger

_Any new failing test, error report, or â€œbugâ€ label invokes this rule._

## 1ï¸âƒ£ Examination Phase (Diagnose)

1. Gather evidence (logs, traces, ENV, recent diffs).
2. **Debug Report** â†’ ranked hypotheses + next-steps checklist.
3. â†ªï¸ _Wait for_ **â€œConfirm diagnosisâ€**.

## 2ï¸âƒ£ Fix Phase (Apply)

1. Draft minimal remedy + test strategy (no file changes).
2. Outline risk, rollback, and perf impact.
3. â†ªï¸ _Wait for_ **â€œApprove fix planâ€**.

## 3ï¸âƒ£ Implementation Phase (Code)

_Repeat micro-TDD slices until the bug is fixed._

| Slice step               | Limits (LOC) |
| ------------------------ | ------------ |
| Failing test diff        | â‰¤ 40         |
| Passing code diff        | â‰¤ 80         |
| Optional refactor        | â‰¤ 40         |
| Explanation + commit msg | concise      |

_Pause after every slice for â€œApply slice Nâ€._

## 4ï¸âƒ£ Finalise

_Run full suite, lint, perf check â†’ present results â†’ wait for_ **â€œShip itâ€**.

## Conversation Rules

1. Never modify repo files in phases â‘  or â‘¡.
2. Ask clarifying questions whenever context is ambiguous.
3. Cite docs only in explanations when they truly aid understanding.
4. Use â‰¤ 200 changed LOC per commit during Phase â‘¢.
5. Keep terminology consistent: **Diagnose â†’ Apply â†’ Code â†’ Ship**.

_End of rule._
